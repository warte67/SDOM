#!/usr/bin/env bash

echo "Running Doxygen..."
doxygen docs/Doxyfile



# # ./dox [--minor|--major]
# # Bumps the version number and regenerates the docs.
# # Use --minor to bump the patch version, or --major to bump the minor version.

# set -e

# # Move to repo root (assuming script is in docs/scripts or similar)
# cd "$(dirname "$0")/../.."

# VERSION_FILE="src/version.lua"

# # ------------------------------------------------------------------------------
# # 1. Ensure version.lua exists (initialize if missing)
# # ------------------------------------------------------------------------------
# if [ ! -f "$VERSION_FILE" ]; then
#   echo "Creating $VERSION_FILE (initial version 0.1.0)"
#   cat > "$VERSION_FILE" <<'EOF'
# return {
#   major = 0,
#   minor = 1,
#   patch = 0,
#   codename = "Genesis",
#   last_build = os.date("%Y-%m-%d")
# }
# EOF
# fi

# # ------------------------------------------------------------------------------
# # 2. Define bump() helper
# # ------------------------------------------------------------------------------
# bump() {
#   local field=$1
#   echo "Bumping $field version..."
#   lua - "$field" "$VERSION_FILE" <<'LUA'
#     local field, path = arg[1], arg[2]
#     local v = dofile(path)
#     v.last_build = os.date("%Y-%m-%d")

#     if field == "patch" then
#       v.patch = (v.patch or 0) + 1
#     elseif field == "minor" then
#       v.minor = (v.minor or 0) + 1
#       v.patch = 0
#     elseif field == "major" then
#       v.major = (v.major or 0) + 1
#       v.minor = 0
#       v.patch = 0
#     end

#     local f = assert(io.open(path, "w"))
#     f:write(string.format([[
# return {
#   major = %d,
#   minor = %d,
#   patch = %d,
#   codename = "%s",
#   last_build = "%s"
# }
# ]], v.major, v.minor, v.patch, v.codename or "Untitled", v.last_build))
#     f:close()
# LUA
# }

# # ------------------------------------------------------------------------------
# # 3. Parse command-line arguments
# # ------------------------------------------------------------------------------
# case "$1" in
#   --minor) bump minor ;;
#   --major) bump major ;;
#   *) bump patch ;;
# esac

# # ------------------------------------------------------------------------------
# # 4. Regenerate documentation
# # ------------------------------------------------------------------------------
# # echo "Running Doxygen..."
# # doxygen docs/Doxyfile

# echo "Done."
