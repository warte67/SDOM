<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SDOM - Simple SDL Document Object Model: Design Goals for &lt;tt&gt;IPanelObject&lt;/tt&gt;</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">SDOM - Simple SDL Document Object Model
   </div>
   <div id="projectbrief">A lightweight, extensible Document Object Model for SDL-based applications.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_docs_2IPanelObject.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Design Goals for &lt;tt&gt;IPanelObject&lt;/tt&gt;</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md184"></a></p><ul>
<li><b>Base class</b> for all scalable UI containers (Panel, Frame, Group, Button, etc.)</li>
<li><b>Fixed 9-slice grid:</b> uses the predefined index offsets from the default or supplied SpriteSheet (see above tables)</li>
<li><b>Support for theming/skins:</b> to change appearance, supply a custom SpriteSheet with the same 9-slice layout</li>
</ul>
<p>If a user wishes to use a different number of tiles, or render their windows, buttons, group boxes, etc. in a different way, they can create custom DisplayObjects. The 9-slice layout and offsets are fixed for all IPanelObject-based panels. </p>
<h1><a class="anchor" id="autotoc_md185"></a>
IPanelObject Design Document</h1>
<h2><a class="anchor" id="autotoc_md186"></a>
What is a 9-slice (9-patch) panel?</h2>
<p>A <b>9-slice</b> (or 9-patch) panel is a technique for drawing scalable UI elements (like panels, buttons, frames) using a grid of 9 regions:</p><ul>
<li><b>4 corners:</b> drawn at original size (not stretched)</li>
<li><b>4 edges:</b> stretched in one direction (horizontally or vertically)</li>
<li><b>1 center:</b> stretched in both directions</li>
</ul>
<h2><a class="anchor" id="autotoc_md187"></a>
What is a 9-slice (9-patch) panel?</h2>
<p>A <b>9-slice</b> (or 9-patch) panel is a technique for drawing scalable UI elements (like panels, buttons, frames) using a grid of 9 regions:</p><ul>
<li><b>4 corners:</b> drawn at original size (not stretched) but they may be clipped towards the inside.</li>
<li><b>4 edges:</b> stretched in one direction (horizontally or vertically)</li>
<li><b>1 center:</b> stretched in both directions</li>
</ul>
<p><b>Corner tiles are never stretched.</b> <br  />
</p><ul>
<li>When the panel is larger than the combined size of the corners, the corners are drawn at their full size, and the edges and center are stretched to fill the remaining space.</li>
<li>When the panel is <em>smaller</em> than the combined width (or height) of the corners, the corners are <b>clipped</b> (not stretched) so that only the visible portion of each corner is rendered. For example, if your sprite tiles are 8x8, 12x12, or any other size, the logic remains the same: the implementation uses the actual sprite width and height for each tile, so custom-sized sprite tiles are fully supported.</li>
</ul>
<p><b>Edge tiles</b> are stretched only in one direction (horizontally for top/bottom edges, vertically for left/right edges). <br  />
 <b>The center tile</b> is stretched in both directions to fill the remaining space.</p>
<p>This approach allows us to create resizable, skinnable UI containers that look good at any size, using a single sprite sheet of any tile size, while ensuring that corners always retain their intended appearance—even when the panel is very small.</p>
<h2><a class="anchor" id="autotoc_md188"></a>
Reference: sprite_8x8 Icon Index Catalog</h2>
<p>For a complete catalog of the available 9-slice graphics and their indices, see sprite_8x8.md.</p>
<h3><a class="anchor" id="autotoc_md189"></a>
Predefined 9-Slice Sets in &lt;tt&gt;sprite_8x8&lt;/tt&gt;</h3>
<p>The default/integrated <code>sprite_8x8</code> SpriteSheet provides several predefined 9-slice sets for UI panels and controls. Each set consists of 9 tiles arranged in a 3x3 grid, with the following index offsets:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadRight">Base Index   </th><th class="markdownTableHeadNone">Set Name    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">0   </td><td class="markdownTableBodyNone">Button Up    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">9   </td><td class="markdownTableBodyNone">Button Up (mouse over/selected)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">18   </td><td class="markdownTableBodyNone">Button Down    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">27   </td><td class="markdownTableBodyNone">Button Down (mouse over/selected)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">36   </td><td class="markdownTableBodyNone">Frame    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">45   </td><td class="markdownTableBodyNone">Group   </td></tr>
</table>
<p>Within each set, the 9 tiles are arranged as follows:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadRight">Offset   </th><th class="markdownTableHeadNone">Position    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">0   </td><td class="markdownTableBodyNone">Top-Left    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">1   </td><td class="markdownTableBodyNone">Top-Center    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">2   </td><td class="markdownTableBodyNone">Top-Right    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">3   </td><td class="markdownTableBodyNone">Left-Center    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">4   </td><td class="markdownTableBodyNone">Center    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">5   </td><td class="markdownTableBodyNone">Right-Center    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">6   </td><td class="markdownTableBodyNone">Bottom-Left    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">7   </td><td class="markdownTableBodyNone">Bottom-Center    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">8   </td><td class="markdownTableBodyNone">Bottom-Right   </td></tr>
</table>
<p>For example, the Frame set uses indices 36–44, where 36 is the top-left corner, 37 is the top-center, and so on.</p>
<p>Refer to sprite_8x8.md for a full list of all available icons and their descriptions.</p>
<ul>
<li><b>Base class</b> for all scalable UI containers (Panel, Frame, Group, Button, etc.)</li>
<li><b>Configurable 9-slice grid:</b> specify which indices in the SpriteSheet correspond to each of the 9 regions</li>
<li><b>Support for theming/skins:</b> easily swap out the SpriteSheet or indices for different looks</li>
<li><b>Automatic layout:</b> handles stretching and positioning of each region based on the panel’s size</li>
<li><b>Simple interface:</b> derived classes only need to specify their skin and content area</li>
<li><b>Content Anchoring:</b> Content will be attached as child nodes and anchored by their four edges to any of their parent's anchoring reference points. See <a class="el" href="md_docs_2display__object__anchoring.html">display_object_anchoring.md</a> for details.</li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md191"></a>
Suggested Steps</h2>
<ol type="1">
<li><b>Define the <code>IPanelObject</code> interface:</b><ul>
<li>Member for SpriteSheet reference and padding/margins</li>
<li>Virtual <code>drawPanel()</code> method to render the 9 regions using the fixed offsets</li>
<li>Method to set/get the SpriteSheet</li>
</ul>
</li>
<li><b>Implement a default 9-slice panel:</b><ul>
<li>Use indices 0–53 from your default <code>sprite_8x8.md</code> SpriteSheet</li>
<li>Use the fixed mapping for corners, edges, and center</li>
</ul>
</li>
<li><b>Scaffold derived classes:</b><ul>
<li><code>Panel</code>, <code>Frame</code>, <code>Group</code>, <code>Button</code>, etc. inherit from <code>IPanelObject</code></li>
<li>Each can override or extend the base drawing/layout as needed</li>
</ul>
</li>
<li><b>Add JSON/config support:</b><ul>
<li>All DisplayObjects and ResourceObjects, including IPanelObject, should support JSON serialization and deserialization for both reading and writing.</li>
<li>Allow specifying the skin (SpriteSheet) in JSON</li>
<li>Support for custom themes</li>
</ul>
</li>
</ol>
<p><b>Note:</b> This is essential for future tooling, such as a form editor, which will require all objects to be JSON-ready for both import/export and live editing. Ensuring robust JSON support now will make future development and testing much easier.</p>
<ol type="1">
<li><b>Test with various sizes and skins:</b><ul>
<li>Ensure the 9-slice logic works for all reasonable panel sizes</li>
</ul>
</li>
</ol>
<ol type="1">
<li><b>Implement a default 9-slice panel:</b><ul>
<li>Use indices 0–53 from your default <code>sprite_8x8.md</code> SpriteSheet</li>
<li>Provide a default mapping for corners, edges, and center</li>
</ul>
</li>
<li><b>Scaffold derived classes:</b><ul>
<li><code>Panel</code>, <code>Frame</code>, <code>Group</code>, <code>Button</code>, etc. inherit from <code>IPanelObject</code></li>
<li>Each can override or extend the base drawing/layout as needed</li>
</ul>
</li>
<li><b>Add JSON/config support:</b><ul>
<li>Allow specifying the skin (SpriteSheet and indices) in JSON</li>
<li>Support for custom themes</li>
</ul>
</li>
<li><b>Test with various sizes and skins:</b><ul>
<li>Ensure the 9-slice logic works for all reasonable panel sizes</li>
</ul>
</li>
</ol>
<hr  />
<h2><a class="anchor" id="autotoc_md193"></a>
Interface Sketch</h2>
<div class="fragment"><div class="line"><span class="keyword">class </span>IPanelObject : <span class="keyword">public</span> IDisplayObject {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="keywordtype">void</span> setSpriteSheet(std::shared_ptr&lt;SpriteSheet&gt; sheet);</div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">void</span> drawPanel(SDL_Renderer* renderer);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">protected</span>:</div>
<div class="line">    std::shared_ptr&lt;SpriteSheet&gt; spriteSheet_;</div>
<div class="line">    <span class="comment">// Uses fixed 9-slice offsets as described above</span></div>
<div class="line">    <span class="comment">// ...padding, margin, etc...</span></div>
<div class="line">};</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md194"></a>
Note on Button Objects and State Handling</h2>
<p>The <code>Button</code> class is itself a 9-slice (9-panel) object, typically derived from <code>IPanelObject</code> for layout and rendering. To provide a common interface for button state (such as up, down, hovered, checked, etc.), a minimal <code>IButtonObject</code> interface can be used. This interface should provide:</p>
<ul>
<li><code>virtual ButtonState getState() const = 0;</code></li>
<li><code>virtual void setState(ButtonState state) = 0;</code></li>
</ul>
<p>where <code>ButtonState</code> is an extensible enumeration of possible button states (up, down, hovered, checked, unchecked, indeterminate, disabled, etc.).</p>
<p>Button classes may use multiple inheritance to implement both <code>IPanelObject</code> and <code>IButtonObject</code>. To avoid diamond inheritance issues, concrete button classes should be marked as <code>final</code> (e.g., <code>class Button final : public IPanelObject, public IButtonObject</code>).</p>
<p>This approach keeps the button state interface flexible and lightweight, while allowing for a wide variety of button types and behaviors. Hover state and tooltip logic are best handled in <code>IDisplayObject</code>, so all display objects can benefit from these features.</p>
<p><b>Summary of design choices:</b></p><ul>
<li>Use multiple inheritance only for pure interface types (no data members)</li>
<li>Mark concrete button classes as <code>final</code> to prevent inheritance issues</li>
<li>Keep <code>IButtonObject</code> minimal and focused on state</li>
<li>Place hover/tooltip logic in <code>IDisplayObject</code> for maximum flexibility </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<footer>
  <a href="#top">Back to top</a> &nbsp;|&nbsp; <a href="https://github.com/warte67/SDOM">Back to SDOM on GitHub</a>
</footer>